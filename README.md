# Дарко Димзов, 232012

## 2. Control Flow Graph 
![SI](https://github.com/user-attachments/assets/595603c6-1f02-4431-b95b-0627633114b0)



## 3. Цикломатска комплексност
Цикломатската комплексност на дадениот код изнесува **9**. Истата бројка е добиена преку формулата **P+1**, каде P е бројот на предикатни јазли. Во овој случај имаме **8 предикатни јазли**, па цикломатската комплексност изнесува 9.

Дополнитено, графикот има **9 региони** и истото се користи за да се одреди цикломатската комплексност.

## 4. Тест случаи според критериумот Every statement
| Тест Случај | allItems | Item.name | discount | cardNumber           | price  |
|-------------|----------|-----------|----------|----------------------|--------|
| ТС1         | null     |           |          |                      |        |
| ТС2         |          | null      |          |                      |        |
| ТС3         |          |           | > 0      | null                 |        |
| ТС4         |          |           | 0        | букви                | > 300  |
| ТС5         |          |           | 0        | цифри                | > 300  |

**Напомена:** празно поле означува дека било која валидна вредност е прифатлива.

Овие тест случаи ги покриваат сите гранки и услови во кодот, со што може да се осигураме дека секој ред од кодот е извршен најмалку еднаш. На овој начин се постигнува критериумот Every Statement. Па така, **минималниот број** на тест случаи за постигнување на критериумот е **5**. 

Во продолжение е даден опис за секој поединечен тест случај. 

| Тест Случај | Опис                                                                 |
|-------------|----------------------------------------------------------------------|
| ТС1         | го исполнува условот: if (allItems == null)                          |
| ТС2         | го исполнува условот: if (item.getName() == null (or) item.getName().length() == 0)   |
| ТС3         | ги исполнува условите: (item.getPrice() > 300 (or) item.getDiscount() > 0 (or) item.getQuantity() > 10) и if (item.getDiscount() > 0), а дополнително се извршува и линијата: throw new RuntimeException("Invalid card number!");|
| ТС4         | не го исполнува условот: if (item.getDiscount() > 0), а го исполнува if (allowed.indexOf(c) == -1) |
| ТС5         | не го исполнува условот: if (allowed.indexOf(c) == -1) па стигнува до линијата: return sum; |



## 5. Тест случаи според критериумот Multiple Condition

| Тест Случај | item.getPrice() > 300 | item.getDiscount() > 0 | item.getQuantity() > 10 |
|-------------|------------------------|--------------------------|---------------------------|
| ТС1         | T                      |                          |                           |
| ТС2         | F                      | T                        |                           |
| ТС3         | F                      | F                        | T                         |
| ТС4         | F                      | F                        | F                         |

**Напомена:** празно поле означува дека било која валидна вредност е прифатлива.

Како што може да се воочи во табелата, потребни се минимум **4** тест случаи за да се задоволи Multiple Condition критериумот. Знаејќи дека Java има **lazy evaluation**, потребно е само првиот или вториот услов да е точен, а останатите воопшто не се разгледуваат. Затоа и се оставени празните места. 

- **ТС1**: Се тестира кога цената е над 300, без разлика на другите услови.
- **ТС2**: Се тестира кога има попуст, но цената е 300 или помалку.
- **ТС3**: Се тестира кога нема попуст и цената е ниска, но количината е над 10.
- **ТС4**: Се тестира случај кога ниту еден услов не е исполнет.

## Објаснување на напишаните unit tests

###### Every statement

- **ТС1**: Се мести allitems = null и се проверува дали излезот е еднаков на "allItems list can't be null!".
- **ТС2**: Се мести името на item да е null и се проверува дали излезот е еднаков на "Invalid item!".
- **ТС3**: Се мести discount > 0, односно 0.25 и cardNumber = null и се проверува дали излезот е еднаков на "Invalid card number!".
- **ТС4**: Се мести discount = 0, price > 300 (price = 301) и вредноста на cardNumber е со букви (aaaaaaaaaaaaaaaa). Потоа, се проверува дали излезот е еднаков на "Invalid character in card number!"
- **ТС5**: Се мести discount = 0, price > 300 (price = 301) и вредноста на cardNumber е со цифри (0000000000000000). Потоа, се проверува дали излезот е еднаков на 271.

###### Multiple Condition

- **ТС1**: Се мести price > 300 (price = 301) и се внесуваат останатите вредности. Потоа се проверува дали точно се пресметува со дадените вредности.
- **ТС2**: Се мести price < 300 (price = 299) и discount > 0 (discount = 0.25). Се внесуваат и останатите вредности, па се проверува дали точно се пресметува со дадените вредности.
- **ТС3**: Се мести price < 300 (price = 299), discount = 0 и quantity > 10 (quantity = 11). Се внесуваат и останатите вредности, па се проверува дали точно се пресметува со дадените вредности. 
- **ТС4**: Се мести price < 300 (price = 299), discount = 0 и quantity <= 10 (quantity = 9). Се внесува и името и cardNumber па се проверува дали резултатот е еднаков на очекуваниот (2691.0).
